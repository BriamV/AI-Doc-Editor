# Work Plan Architecture - AI Document Editor

## Overview

This document provides the **authoritative implementation work plan** for the AI Document Editor project execution, defining the structured approach for delivering an on-premises AI-powered document generation application. This specification serves as the **reference standard** for all project management activities, resource allocation, and delivery coordination.

**Document Metadata:**
- **Version:** 5.0 (Corrected Nomenclature)
- **Status:** Approved for Execution
- **Author:** Tech Lead / Project Manager
- **Last Updated:** 24 jun 2025
- **Review Cycle:** Sprint retrospectives with milestone reviews

---

## üìê Project Management Principles

### üéØ Core Planning Principles
1. **Iterative Delivery**: Six releases (R0-R6) with measurable value increments
2. **Predictable Workload**: Work packages balanced at 29-35 complexity points
3. **Traceability**: Global Task Identifiers (GTI) with Work Item Identifiers (WII)
4. **Quality Integration**: CI/CD gates and Definition of Done validation
5. **Risk Management**: Proactive risk assessment and mitigation at each milestone

### üèõÔ∏è Execution Patterns
- **Sprint-Based Development**: 2-week iterations with 3-week final validation
- **Task-Driven Approach**: Atomic tasks with verifiable deliverables
- **Dependency Management**: Clear prerequisite chains with critical path optimization
- **Quality Gates**: Automated validation with manual oversight checkpoints

---

## üìö Work Breakdown Architecture

### üéØ Planning Methodology Overview

Este documento detalla el plan de trabajo para la ejecuci√≥n del proyecto "Generador de Documentos con IA + RAG", seg√∫n lo definido en el Documento de Requisitos del Producto (PRD v2). El objetivo principal es desarrollar y entregar una aplicaci√≥n on-premise que permita a los editores generar, editar, versionar y exportar documentos de alta calidad de manera eficiente y segura.

El plan est√° dise√±ado para seguir un enfoque iterativo e incremental, distribuyendo el trabajo en seis releases principales (R0 a R6), cada una con una duraci√≥n de dos a tres semanas. Cada release se compone de Paquetes de Trabajo (Work Packages - WP) cohesivos y balanceados, con un objetivo de complejidad de 29 a 35 puntos por paquete, para asegurar una carga de trabajo predecible y sostenible.

Este plan de trabajo es el documento rector para la asignaci√≥n de tareas, el seguimiento del progreso y la gesti√≥n de dependencias durante todo el ciclo de vida del proyecto.

## 2. Metodolog√≠a y Proceso

La ejecuci√≥n del proyecto se regir√° por los siguientes principios y procesos:

- **Desarrollo Iterativo**: El proyecto se divide en sprints de dos semanas (a excepci√≥n de la R6), donde cada sprint corresponde a una Release. Al final de cada uno, se espera entregar un incremento de valor funcional y probado.

- **Gesti√≥n de Tareas**: Las tareas, definidas en el Cat√°logo (Secci√≥n 7), son las unidades funcionales de trabajo. Cada una posee un Identificador Global de Tarea (`T-XX`) que es √∫nico e inmutable a lo largo del proyecto.

- **Flujo de Ramas (Git Flow)**: Se utilizar√° el flujo de trabajo Git definido en `CONTRIBUTING.md`. Las ramas de funcionalidad se nombrar√°n usando el Identificador Global de Tarea: `feature/T<XX>-nombre-descriptivo`.

- **Calidad del C√≥digo**: Se aplicar√°n estrictamente las directrices de `DESIGN_GUIDELINES.md`. La tarea `T-01` establece un pipeline de CI/CD con puertas de calidad autom√°ticas que deben superarse para cualquier integraci√≥n.

- **Gesti√≥n de Riesgos**: La matriz de riesgos (definida en `PRD v2.md`, ¬ß10) ser√° revisada al final de cada hito, como formaliza la tarea de proceso `T-42`.

### üìä Complexity Analysis Framework

#### **Complexity Quantification Model**
The project employs an objective complexity scoring system based on four fundamental criteria, each scored on a 1-5 scale:

**Complexity Dimensions**:
| Dimension | Code | Description | Scale |
|-----------|------|-------------|-------|
| **Implementation Effort** | C1 | Volume of work (code, config, tests) | 1 (Minimal) - 5 (Extensive) |
| **Technical Risk & Innovation** | C2 | Technology uncertainty, R&D components | 1 (Known) - 5 (Experimental) |
| **Dependencies & Integration** | C3 | Inter-task and system interconnections | 1 (Isolated) - 5 (Highly Coupled) |
| **Scope & UX Ambiguity** | C4 | Requirements clarity and UI complexity | 1 (Clear) - 5 (Ambiguous) |

#### **Complexity Calculation**
**Total Complexity = C1 + C2 + C3 + C4** (Range: 4-20)

**Decomposition Rules**:
- **Complexity > 8**: Must decompose into manageable subtasks (4-8 points each)
- **Process Tasks**: May have complexity > 0 representing coordination overhead
- **Atomic Tasks**: Should be directly implementable without further breakdown

#### **Quality Thresholds**
| Complexity Range | Classification | Action Required |
|------------------|----------------|-----------------|
| **4-8 points** | Atomic Task | Direct implementation |
| **9-12 points** | Complex Task | Decompose into 2-3 subtasks |
| **13-20 points** | Epic Task | Decompose into 3-5 subtasks |

### Tabla de Evaluaci√≥n de Complejidad por Tarea

Esta tabla es el fundamento auditable para la planificaci√≥n. El identificador (#) es el Identificador Global de Tarea (GTI).

| #         | Tarea                               | C1 (Effort) | C2 (Risk) | C3 (Deps) | C4 (Scope) | Total   |
| :-------- | :---------------------------------- | :---------- | :-------- | :-------- | :--------- | :------ |
| **T-01**  | Baseline & CI/CD                    | 5           | 2         | 2         | 3          | 12      |
| **T-02**  | OAuth 2.0 + JWT Roles               | 3           | 2         | 2         | 2          | 9       |
| **T-03**  | L√≠mites de Ingesta & Rate           | 3           | 2         | 4         | 2          | 11      |
| **T-04**  | File Ingesta RAG + Perf             | 5           | 4         | 5         | 4          | 18      |
| **T-05**  | Planner Service (/plan)             | 4           | 4         | 3         | 3          | 14      |
| **T-06**  | Sections WS                         | 4           | 4         | 3         | 3          | 14      |
| **T-07**  | Editor UI Core + Split View         | 4           | 3         | 3         | 4          | 14      |
| **T-08**  | Action Palette + IA Cmds            | 3           | 3         | 3         | 3          | 12      |
| **T-09**  | Versioning & Diff                   | 4           | 2         | 3         | 3          | 12      |
| **T-10**  | Export Service                      | 3           | 3         | 2         | 2          | 10      |
| **T-11**  | Coherence Checker                   | 4           | 5         | 2         | 4          | 15      |
| **T-12**  | Credential Store & Crypto           | 4           | 4         | 4         | 2          | 14      |
| **T-13**  | Audit Log WORM & Viewer             | 3           | 3         | 2         | 3          | 11      |
| **T-14**  | Observability & Dashboards          | 4           | 3         | 3         | 3          | 13      |
| **T-15**  | Backup & Storage Ops                | 3           | 3         | 2         | 2          | 10      |
| **T-16**  | Deployment & Scaling (PoC)          | 3           | 4         | 2         | 3          | 12      |
| **T-17**  | API-SPEC & ADR Governance           | 3           | 1         | 1         | 3          | 8       |
| **T-18**  | Context Flags & Template Selection  | 3           | 2         | 3         | 3          | 11      |
| **T-19**  | Comment Tags & /comment CRUD        | 3           | 2         | 2         | 3          | 10      |
| **T-20**  | Bench E2E Performance               | 3           | 3         | 4         | 2          | 12      |
| **T-21**  | Navigation & Accessibility          | 4           | 2         | 2         | 4          | 12      |
| **T-22**  | Delete & Restore (Logical)          | 2           | 2         | 3         | 2          | 9       |
| **T-23**  | Health-check API                    | 1           | 1         | 2         | 1          | 5       |
| **T-24**  | Consentimiento Expl√≠cito            | 2           | 1         | 2         | 2          | 7       |
| **T-25**  | Dashboard Costes & Costo por Doc    | 3           | 3         | 3         | 3          | 12      |
| **T-26**  | Storage Quota                       | 2           | 1         | 2         | 2          | 7       |
| **T-27**  | Uptime Monitoring                   | 2           | 2         | 2         | 1          | 7       |
| **T-28**  | Token Budget Guard                  | 2           | 2         | 2         | 3          | 9       |
| **T-29**  | Restore-Verifier                    | 2           | 2         | 2         | 1          | 7       |
| **T-30**  | Rewrite-Latency Test                | 2           | 2         | 3         | 1          | 8       |
| **T-31**  | Pause/Abort Flow                    | 2           | 2         | 3         | 3          | 10      |
| **T-32**  | Template Management                 | 3           | 1         | 2         | 3          | 9       |
| **T-33**  | Draft-Quality Test                  | 3           | 4         | 3         | 3          | 13      |
| **T-34**  | Usability Testing                   | 3           | 1         | 4         | 3          | 11      |
| **T-35**  | GDPR Erasure on Demand              | 2           | 3         | 3         | 2          | 10      |
| **T-36**  | GDPR Erase Purge Job                | 5           | 5         | 4         | 3          | 17      |
| **T-37**  | Admin Panel: User & System Mgmt     | 4           | 2         | 4         | 4          | 14      |
| **T-38**  | Implementar Sharding (Producci√≥n)   | 4           | 5         | 3         | 2          | 14      |
| **T-39**  | Implementar Pin/Favoritos           | 2           | 1         | 2         | 2          | 7       |
| **T-40**  | Mejoras de Usabilidad Post-Piloto   | 2           | 1         | 3         | 3          | 9       |
| **T-41**  | User API Key Management             | 2           | 2         | 3         | 2          | 9       |
| **T-42**  | Risk Matrix Review (Proceso)        | 1           | 2         | 1         | 1          | 5       |
| **T-43**  | Implementar Escaneo de Dependencias | 3           | 3         | 2         | 1          | 9       |
| **T-44**  | Admin Panel Skeleton & Config Store | 3           | 2         | 1         | 3          | 9       |
| **T-45**  | Guardrails Integration              | 3           | 2         | 2         | 2          | 9       |
| **T-46**  | DeepEval Benchmarks                 | 3           | 3         | 3         | 2          | 11      |
| **T-47**  | Gate R4 Orchestrator Decision       | 1           | 1         | 1         | 0          | 3       |
| **Total** |                                     |             |           |           |            | **484** |

_Nota: Las tareas de proceso `T-42` y `T-47` tienen una complejidad total > 0 que representa el overhead de gesti√≥n, coordinaci√≥n y documentaci√≥n, aunque sus subtareas de implementaci√≥n sean de complejidad 0. La tarea `T-42` se ejecutar√° al final de cada hito (R0-R6) y no se incluye en la carga de un paquete de trabajo espec√≠fico._

## 4. Roles y Responsabilidades

- **Product Owner**: Responsable de definir y priorizar los requisitos del backlog, aceptar los entregables de cada sprint y asegurar que el producto final cumpla con la visi√≥n del negocio.
- **Tech Lead**: Responsable de la arquitectura t√©cnica, la calidad del c√≥digo, la resoluci√≥n de impedimentos t√©cnicos y la supervisi√≥n de la ejecuci√≥n de este plan de trabajo.
- **Equipo de Desarrollo**: Responsable de implementar las tareas asignadas, realizar pruebas unitarias y de integraci√≥n, y participar en las revisiones de c√≥digo.

## 5. Estructura del Plan y Desglose de Trabajo (WBS)

El plan se organiza en una jerarqu√≠a de cinco niveles para garantizar una trazabilidad completa y auditable. Para eliminar ambig√ºedades, se utiliza un sistema de doble identificaci√≥n:

- **Identificador Global de Tarea (GTI)**: Un c√≥digo √∫nico e inmutable (`T-XX`) para cada tarea definida en el proyecto. Representa el "QU√â".
- **Identificador de Elemento de Trabajo (WII)**: Un c√≥digo jer√°rquico que describe la ubicaci√≥n exacta de una unidad de trabajo en el plan de ejecuci√≥n. Representa el "D√ìNDE" y "CU√ÅNDO".

### Niveles de la WBS:

1.  **Nivel 0: Proyecto**: "Generador de Documentos con IA + RAG".
2.  **Nivel 1: Release (R)**: Hitos principales del proyecto (ej. R0, R1).
3.  **Nivel 2: Paquete de Trabajo (WP)**: Agrupaciones l√≥gicas de tareas dentro de una release (ej. `R0.WP1`).
4.  **Nivel 3: Tarea (T)**: Unidad de trabajo funcional identificada por su GTI (ej. `T-04`). Define un entregable completo y verificable.
5.  **Nivel 4: Subtarea (ST)**: La unidad de trabajo m√°s peque√±a y directamente implementable. Se identifica con un WII que une su contexto de ejecuci√≥n con el GTI de su tarea padre.

### Formato del WII:

`R<#>.WP<#>-T<XX>-ST<#>`

_Ejemplo: `R1.WP1-T04-ST1` identifica de forma inequ√≠voca a la "Subtarea 1" de la "Tarea global T-04", que est√° planificada para ejecutarse dentro del "Paquete de Trabajo 1" de la "Release 1"._

### Ejemplo de Desglose Revisado: Tarea T-04 (GTI: T-04, Complejidad: 18)

La tarea `T-04` (File Ingesta RAG + Perf) se desglosa en las siguientes subtareas, cada una con un identificador (WII) √∫nico y trazable:

| ID del Elemento de Trabajo (WII) | Descripci√≥n de la Subtarea                                                         | Complejidad Estimada |
| :------------------------------- | :--------------------------------------------------------------------------------- | :------------------- |
| `R1.WP1-T04-ST1`                 | Implementar el endpoint REST `/upload` con validaci√≥n de metadatos y archivos.     | 4                    |
| `R1.WP1-T04-ST2`                 | Desarrollar el m√≥dulo de extracci√≥n de texto para PDF, DOCX y MD.                  | 5                    |
| `R1.WP1-T04-ST3`                 | Integrar cliente OpenAI para generar embeddings (`text-embedding-3-small`).        | 2                    |
| `R1.WP1-T04-ST4`                 | Implementar l√≥gica de upsert en Chroma para indexar y actualizar vectores.         | 3                    |
| `R1.WP1-T04-ST5`                 | Crear script de benchmark (JMeter) para medir rendimiento de ingesta (`PERF-003`). | 2                    |
| `R1.WP1-T04-ST6`                 | Crear script de benchmark para medir latencia de b√∫squeda vectorial (`PERF-004`).  | 2                    |

Este sistema asegura que cada pieza de trabajo es localizable en el plan sin riesgo de interpretaci√≥n. El equipo de desarrollo es responsable de realizar el desglose a nivel de Subtarea (ST) antes de iniciar la implementaci√≥n.

## 6. Plan de Ejecuci√≥n por Releases

A continuaci√≥n se detalla la distribuci√≥n de paquetes de trabajo y las tareas (referenciadas por su GTI) para cada release.

### Release 0: Core Backend & Security Foundation (Plazo: 2 semanas)

**Objetivo:** Establecer los cimientos t√©cnicos, de seguridad y de CI/CD del proyecto.

| ID Paquete | Complejidad | Tareas                         | Justificaci√≥n del Agrupamiento                                                                                                                                                                                            |
| :--------- | :---------- | :----------------------------- | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `R0.WP1`   | 34          | `T-01`, `T-17`, `T-23`, `T-43` | **Fundamentos y Gobernanza**: Agrupa las tareas base indispensables: CI/CD, gobernanza de la arquitectura, health-check y el escaneo de seguridad de dependencias.                                                        |
| `R0.WP2`   | 27          | `T-02`, `T-41`, `T-44`         | **Autenticaci√≥n y Configuraci√≥n**: Establece el flujo de autenticaci√≥n, la gesti√≥n de claves de usuario y el esqueleto del panel de administraci√≥n, prerrequisitos para R1.                                               |
| `R0.WP3`   | 25          | `T-13`, `T-12`                 | **Seguridad y Auditor√≠a**: Enfocado en la base de seguridad (logs WORM, criptograf√≠a). **Nota:** Estas tareas son interdependientes; la implementaci√≥n del log (`T-13`) debe preceder a la l√≥gica de auditor√≠a de `T-12`. |

### Release 1: Ingesta & Generaci√≥n Inicial (Plazo: 2 semanas)

**Objetivo:** Implementar el flujo completo de ingesta de documentos y el pipeline de generaci√≥n de borradores.

| ID Paquete | Complejidad | Tareas                 | Justificaci√≥n del Agrupamiento                                                                                                                                                                                                                              |
| :--------- | :---------- | :--------------------- | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `R1.WP1`   | 36          | `T-04`, `T-03`, `T-24` | **Flujo de Ingesta Unificado**: Mantiene la cohesi√≥n tem√°tica al agrupar la ingesta RAG, los l√≠mites de uso y el consentimiento del usuario. _Nota: Este paquete excede marginalmente el l√≠mite superior (35) debido a la complejidad indivisible de T-04._ |
| `R1.WP2`   | 28          | `T-05`, `T-06`         | **Pipeline de Generaci√≥n**: Adelanta el backend de generaci√≥n de contenido para que la UI del editor (R2) tenga servicios funcionales a los que conectarse.                                                                                                 |

### Release 2: Editor Funcional y Calidad (Plazo: 2 semanas)

**Objetivo:** Entregar una experiencia de edici√≥n interactiva y validar la calidad del contenido generado.

| ID Paquete | Complejidad | Tareas                 | Justificaci√≥n del Agrupamiento                                                                                                                                                                                                                                                                      |
| :--------- | :---------- | :--------------------- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `R2.WP1`   | 36          | `T-07`, `T-08`, `T-31` | **Editor Interactivo**: Construye la UI del editor sobre el backend de R1 y lo dota de comandos de IA y control de flujo para una experiencia funcional. _Nota: Este paquete excede marginalmente el l√≠mite superior (35) debido a la complejidad indivisible de las tareas de UI del editor core._ |
| `R2.WP2`   | 28          | `T-11`, `T-33`         | **Calidad del Contenido (Core)**: Agrupa las tareas dedicadas a la validaci√≥n y prueba de la calidad del contenido generado por el pipeline de R1.                                                                                                                                                  |
| `R2.WP3`   | 20          | `T-45`, `T-46`         | **Calidad del Contenido (Tooling)**: Implementa el tooling de soporte (Guardrails, DeepEval) necesario para validar y asegurar la calidad de T-11, manteniendo la cohesi√≥n tem√°tica con el objetivo de la release.                                                                                  |

### Release 3: Productividad y Navegaci√≥n (Plazo: 2 semanas)

**Objetivo:** Mejorar la productividad del usuario con funcionalidades avanzadas de navegaci√≥n y gesti√≥n de contexto.

| ID Paquete | Complejidad | Tareas                 | Justificaci√≥n del Agrupamiento                                                                                                                                      |
| :--------- | :---------- | :--------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `R3.WP1`   | 31          | `T-21`, `T-19`, `T-39` | **Experiencia de Usuario (UX) Avanzada**: Enfocado en la organizaci√≥n y navegaci√≥n del espacio de trabajo (accesibilidad, comentarios, favoritos).                  |
| `R3.WP2`   | 29          | `T-32`, `T-18`, `T-28` | **Gesti√≥n de Contexto y Plantillas**: Agrupa la gesti√≥n de plantillas, su uso en la UI y la protecci√≥n de presupuesto de tokens, funcionalidades interrelacionadas. |

### Release 4: Ciclo de Vida del Documento y Admin (Plazo: 2 semanas)

**Objetivo:** Implementar la gesti√≥n completa del ciclo de vida del documento y las capacidades de administraci√≥n del sistema.

| ID Paquete | Complejidad | Tareas                 | Justificaci√≥n del Agrupamiento                                                                                                                                                                                                                                           |
| :--------- | :---------- | :--------------------- | :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `R4.WP1`   | 31          | `T-09`, `T-10`, `T-22` | **Gesti√≥n del Documento**: Agrupa versionado, exportaci√≥n y borrado l√≥gico, que son acciones sobre un documento en su etapa final.                                                                                                                                       |
| `R4.WP2`   | 17          | `T-37`, `T-47`         | **Panel de Administraci√≥n y Decisi√≥n de Orquestador**: El panel de administraci√≥n se implementa en R4, cuando la mayor√≠a de las funcionalidades que debe gobernar ya existen. Punto de control (gate) para validar KPIs y definir si se adopta alg√∫n orquestador en R5+. |
| `R4.WP3`   | 12          | `T-16`                 | **Validaci√≥n de Escalabilidad (PoC)**: Ejecuta el PoC de escalado en un entorno funcionalmente estable (post-R3) para informar con antelaci√≥n la implementaci√≥n de producci√≥n en R6, mitigando riesgos t√©cnicos tard√≠os.                                                 |

### Release 5: Operaciones y Compliance (Plazo: 2 semanas)

**Objetivo:** Asegurar la observabilidad, la gesti√≥n de costes y el cumplimiento de las normativas de datos.

| ID Paquete | Complejidad | Tareas         | Justificaci√≥n del Agrupamiento                                                                                                                                                                                                |
| :--------- | :---------- | :------------- | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `R5.WP1`   | 32          | `T-14`, `T-25` | **Observabilidad y Costes**: Agrupa el monitoreo de la plataforma y el control de costes, capacidades de operaci√≥n madura.                                                                                                    |
| `R5.WP2`   | 17          | `T-15`, `T-26` | **Compliance, Almacenamiento**: Agrupa el sistema de backup y la gesti√≥n de cuotas, tareas de infraestructura que se benefician de un entorno operativo estable. (Paquete de menor complejidad para permitir estabilizaci√≥n). |

### Release 6: Fiabilidad, Escalado y Validaci√≥n Final (Plazo: 3 semanas)

**Objetivo:** Garantizar la resiliencia, escalabilidad y calidad final del producto a trav√©s de pruebas exhaustivas y validaci√≥n con usuarios.

| ID Paquete | Complejidad | Tareas                         | Justificaci√≥n del Agrupamiento                                                                                                                                                                                               |
| :--------- | :---------- | :----------------------------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `R6.WP1`   | 31          | `T-36`, `T-29`, `T-27`         | **Resiliencia Operativa**: Se enfoca en la fiabilidad del sistema mediante la purga de datos, la verificaci√≥n de restauraci√≥n y el monitoreo de uptime.                                                                      |
| `R6.WP2`   | 26          | `T-38`, `T-35`                 | **Escalabilidad y Borrado Definitivo**: Une la implementaci√≥n de escalado en producci√≥n (informada por el PoC de R4) con la funcionalidad de borrado definitivo a demanda, ambas acciones cr√≠ticas sobre la infraestructura. |
| `R6.WP3`   | 31          | `T-20`, `T-30`, `T-34`, `T-40` | **Validaci√≥n E2E y Cierre**: Agrupa todas las pruebas de validaci√≥n final (performance, latencia, usabilidad) y la implementaci√≥n de las mejoras resultantes.                                                                |

## 7. Cat√°logo de Tareas (Work Breakdown Structure - WBS)

La siguiente tabla contiene el detalle de cada una de las tareas, identificadas por su Identificador Global de Tarea (GTI). Este es el cat√°logo maestro del "QU√â" se debe hacer.

| # (GTI)  | Tarea (rama Git: `feature/T<XX>-...`)               | Alcance / Entregables verificables                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | Requisitos PRD y Gaps Abordados                                                    | Depende de                     | Criterio de aceptaci√≥n                                                                                                                                                                                                                                                                      | Evidencia / Artefactos                                                                              |
| :------- | :-------------------------------------------------- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :--------------------------------------------------------------------------------- | :----------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | :-------------------------------------------------------------------------------------------------- |
| **T-01** | Baseline & CI/CD                                    | Docker-compose + Makefile; lint & tests (ruff, black, eslint) en GitHub Actions; plantilla ADR + CODEOWNERS; estructura del job qa-gate con an√°lisis de calidad y umbrales; linter de Pull Requests. El alcance incluye la migraci√≥n a Pydantic v2 y el freeze de dependencias (requirements-prod.txt) con un benchmark que demuestre una mejora de rendimiento x5 frente a v1.                                                                                                                                                                                             | DESIGN_GUIDELINES ¬ßCI/CD pipeline, ¬ßM√©tricas de Calidad, ¬ßProceso; CONTRIBUTING.md | ‚Äî                              | 1. Pipeline verde en commit inicial. 2. ADR-000 registrada. 3. El job qa-gate integra an√°lisis est√°tico (radon, SonarJS) que falla si se superan umbrales cr√≠ticos de complejidad. 4. El pipeline valida que los t√≠tulos de PRs sigan la convenci√≥n `feat(T-XX): ....`                      | Logs de CI, directorio de ADR, config. del pipeline, reportes de calidad, config. del linter de PR. |
| **T-02** | OAuth 2.0 + JWT con Roles y Refresh Token           | Login Google/MS, emisi√≥n de JWT con roles (editor/admin), implementaci√≥n de flujo de **refresh-token** para gesti√≥n de sesi√≥n extendida; endpoint `/auth/refresh`.                                                                                                                                                                                                                                                                                                                                                                                                          | USR-001 (Gap: detalles de roles)                                                   | `T-01`                         | El flujo E2E devuelve un JWT v√°lido, el endpoint de refresh funciona correctamente y responde con 401 al expirar ambos tokens.                                                                                                                                                              | Colecci√≥n Postman, tests unitarios.                                                                 |
| **T-03** | L√≠mites de Ingesta & Rate                           | Implementa la l√≥gica de backend y la UI de configuraci√≥n para los l√≠mites de ingesta y rate-limiting definidos en ADM-001 y RLM-001. El backend controla N docs y T MB; rate-limit 30 req/min en endpoints `/upload`, `/rewrite`, `/plan` y `/draft_section`. **Nota de Dependencia Cr√≠tica:** La l√≥gica de esta tarea consume los valores de configuraci√≥n persistidos por el servicio "Config Store" implementado en T-44, que debe dise√±arse para satisfacer este caso de uso.                                                                                           | ADM-001 (l√≥gica de backend), RLM-001                                               | `T-44`                         | Carga N+1 docs o > l√≠mite MB ‚áí HTTP 400. 40 req/min en endpoints rate-limitados ‚áí HTTP 429.                                                                                                                                                                                                 | Cypress tests.                                                                                      |
| **T-04** | File Ingesta RAG + Perf                             | `/upload` REST; extracci√≥n de texto/metadatos; embeddings `OA-3-small`; upsert en Chroma; benchmark JMeter/Locust ‚â• 50 MB/h; m√©tricas: ingesta ‚â§ 120s/10MB (PERF-003), vector-search p95 < 1s (PERF-004). **Nota de Riesgo**: La complejidad de la extracci√≥n de texto puede aumentar si se encuentran documentos PDF no est√°ndar (solo im√°genes) o DOCX con formato complejo. La estimaci√≥n asume formatos est√°ndar. **Nota de Proceso**: El Tech Lead es el responsable final de certificar el cumplimiento de los KPIs de rendimiento basados en los informes generados. | KB-001/002/003, PERF-003/004                                                       | `T-12`, `T-41`                 | 1. Suite JMeter evidencia tiempos. 2. Test de regresi√≥n verifica que embeddings antiguos no se recuperan tras upsert y los nuevos s√≠ (score ‚â• 0.75). 3. Metadatos correctos visibles en la UI post-carga.                                                                                   | Pytest con fixtures, reporte JMeter, test Cypress UI, Acta de Certificaci√≥n de KPI.                 |
| **T-05** | Planner Service (`/plan`)                           | M√≥dulo independiente Hex-port; Outline-Guided TG; config chunk ‚â§ 800 tok; documentaci√≥n del flujo de generaci√≥n de borrador inicial (outline + streaming)                                                                                                                                                                                                                                                                                                                                                                                                                   | GEN-002                                                                            | `T-01`, `T-41`                 | 1. Req ‚Üí resp ‚â§ 1 s. 2. JSON H1‚ÄìH3 v√°lido. 3. El servicio incluye una l√≥gica de fallback a un modo 'single-shot' si el outline generado no cumple un umbral de calidad (p.ej., no contiene headings H2). 4. Test E2E demuestra generaci√≥n de borrador inicial seg√∫n flujo documentado.      | Unit tests, OpenAPI update, diagrama de flujo.                                                      |
| **T-06** | Sections WS                                         | WS stream 30 tok/s; handshake ‚â§ 150 ms; auto-refresh de `global_summary` tras cada secci√≥n (~ 100 tok); Responsabilidad de la m√©trica PERF-002 transferida a T-07                                                                                                                                                                                                                                                                                                                                                                                                           | GEN-002; UX-FLOW ¬ß4 (handshake ‚â§ 150 ms); PERF-002                                 | `T-05`, `T-41`                 | 1. Secci√≥n 600 tok p95 ‚â§ 20 s. 2. handshake WS ‚â§ 150 ms. 3. `global_summary` actualiza p95 ‚â§ 500 ms tras cada secci√≥n (~ 100 tok). 4. Latencia UI medida en `T-07`.                                                                                                                         | WS integration tests, captura `global_summary`.                                                     |
| **T-07** | Editor UI Core + Split View                         | React 18 split-view; Prompt Bar con ETA din√°mica; Outline Pane con drag-drop; consolida m√©trica `PERF-002` (< 200 ms render).                                                                                                                                                                                                                                                                                                                                                                                                                                               | EDT-001, UX-FLOW ¬ß 2.1, PERF-002                                                   | `T-06`                         | 1. Lighthouse p95 < 200 ms. 2. Drag-drop de chips persiste. 3. ETA de progreso con ¬±5% de precisi√≥n. 4. Editor Monaco configurado seg√∫n `DESIGN_GUIDELINES.md` (`minimap: false`, `wordWrap: 'on'`).                                                                                        | Reporte Lighthouse, tests Cypress UX.                                                               |
| **T-08** | Action Palette + IA Cmds                            | `editor.addAction` (8 comandos); hook `/rewrite`; checker de coherencia contextual post-reescritura; ROUGE-L test harness                                                                                                                                                                                                                                                                                                                                                                                                                                                   | EDT-002 (palette gap)                                                              | `T-07`, `T-41`                 | 1. `/resume` reduce ‚â• 20 % y ROUGE-L ‚â• 0,7. 2. Test demuestra que una reescritura que introduce una incoherencia (p.ej., cambia el sujeto) es marcada o rechazada.                                                                                                                          | Jest + golden texts.                                                                                |
| **T-09** | Versioning & Diff                                   | SHA-256 snapshot each save; DiffEditor; rollback UI; 500-vers cap                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | VER-001/002 (cubre gap metodol√≥gico)                                               | `T-07`, `T-13`                 | Rollback a vN sin perder historial                                                                                                                                                                                                                                                          | Unit + UI tests, WORM log.                                                                          |
| **T-10** | Export Service                                      | Celery queue; Pandoc MD‚ÜíPDF/DOCX; progress toast                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | EXP-001 (cubre gap metodol√≥gico)                                                   | `T-01`                         | PDF abre sin warnings; DOCX pasa OpenXML validator                                                                                                                                                                                                                                          | Artefactos, CI job.                                                                                 |
| **T-11** | Coherence Checker                                   | `/revise_global` POST; BERT-based cohesion score ‚â§ 1 %. **Nota de Riesgo:** Tarea con alto componente de I+D (Riesgo T√©cnico C2=5). El √©xito depende de la viabilidad del modelo BERT para esta tarea. Se debe definir un plan de contingencia (p.ej., checker basado en reglas m√°s simples) si el enfoque principal no cumple los objetivos en el plazo de la release.                                                                                                                                                                                                     | COH-001 (cubre gap metodol√≥gico)                                                   | `T-06`                         | Test dataset incoherencias ‚â§ 1 %                                                                                                                                                                                                                                                            | Metrics report.                                                                                     |
| **T-12** | Credential Store & Crypto                           | AES-256 at-rest; TLS 1.3; cron job diario que fuerza la rotaci√≥n de claves API > 90 d√≠as y lo registra en el log de auditor√≠a.                                                                                                                                                                                                                                                                                                                                                                                                                                              | SEC-001/002/003/004                                                                | `T-13`                         | 1. Simulaci√≥n de clave de 91 d√≠as dispara rotaci√≥n forzada y genera entrada en log WORM en ‚â§ 5 min, seg√∫n SEC-002. 2. La clave antigua queda invalidada.                                                                                                                                    | Reporte de Pentest, log de auditor√≠a.                                                               |
| **T-13** | Audit Log WORM & Viewer                             | Append-only table (usuario, acci√≥n, timestamp, IP, doc-ID, versi√≥n); UI de visualizaci√≥n para Admins con filtros.                                                                                                                                                                                                                                                                                                                                                                                                                                                           | AUD-001                                                                            | `T-01`                         | 1. Entrada en log WORM aparece ‚â§ 5 s tras la acci√≥n. 2. La UI del visor de logs permite filtrar por usuario, tipo de acci√≥n y rango de fechas, con paginaci√≥n.                                                                                                                              | DB proof, Cypress tests del visor, screenshots del UI con filtros aplicados.                        |
| **T-14** | Observability & Dashboards + KPIs                   | OTel traces; Prometheus + Grafana; paneles: TMG (KPI-01), ratio √©xito ingesta (KPI-06), reutilizaci√≥n plantillas (KPI-05), draft_p95, doc_count/month, tokens/doc                                                                                                                                                                                                                                                                                                                                                                                                           | OBS-001/002; MET-001/002; KPI-01/05/06                                             | `T-01`                         | 1. 99 % spans instrumentados. 2. Panel muestra KPI: TMG, doc_count/month, reuse_templates_ratio, tokens_per_doc, draft_p95, ratio √©xito ingesta. 3. Datos lag < 60 s. 4. Alertas configuradas para thresholds de cada KPI.                                                                  | Grafana screenshots, alert rules export.                                                            |
| **T-15** | Backup & Storage Ops                                | Daily encrypted backup; restore script; retenci√≥n de backups 30 d; quota alert 80 % (KPI-13)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | INF-001; STO-001; STO-002                                                          | `T-01`                         | 1. CI/CD job semanal ejecuta `restore --verify` y comprueba hash. 2. > 80 % uso dispara alerta. 3. Backups > 30 d purgados autom√°ticamente.                                                                                                                                                 | Job logs; CI job config; retention audit log.                                                       |
| **T-16** | Deployment & Scaling (PoC)                          | HPA manifests (‚â• 3 r√©plicas); PoC de sharding para vector-store (Qdrant/Chroma); pol√≠ticas de auto-escalado para servicios de aplicaci√≥n. **Nota de Proceso**: La ejecuci√≥n de este PoC requiere que las funcionalidades core (hasta R2) est√©n estables.                                                                                                                                                                                                                                                                                                                    | SCA-001 (parcial); AVL-001                                                         | `T-01`, `T-04`, `T-06`         | 1. Load test 10 usuarios/100 docs dispara escalado de aplicaci√≥n a ‚â• 3 r√©plicas. 2. PoC demuestra distribuci√≥n de datos y consultas a trav√©s de ‚â• 2 shards. 3. Failover de aplicaci√≥n MTTR ‚â§ 2 h.                                                                                           | Chaos test report, HPA metrics, PoC report.                                                         |
| **T-17** | API-SPEC & ADR Governance                           | OpenAPI 3.1 continuo; ADRs (size-chunk, Celery, API Key Model); autogenerar docs/traceability.xlsx (req ‚áÑ tarea ‚áÑ test) en cada commit; check de `DESIGN_GUIDELINES`. El alcance incluye la creaci√≥n de una plantilla est√°ndar para "Actas de Certificaci√≥n" de tareas cr√≠ticas.                                                                                                                                                                                                                                                                                            | `DESIGN_GUIDELINES` ¬ß Proceso                                                      | `T-01`                         | `spectral` sin errores; matriz de trazabilidad actualizada y versionada; √≠ndice de ADR actualizado; ADR para T-41 existe.                                                                                                                                                                   | Docs en commit, artefacto de CI, plantilla de Acta de Certificaci√≥n versionada.                     |
| **T-18** | Context Flags & Template Selection                  | UI toggle para contextos (KB, Web, Libre); Dropdown de Plantillas; API `/context` PATCH; Benchmark latencia toggle < 3 s; Tests de exclusi√≥n RAG y plantillas.                                                                                                                                                                                                                                                                                                                                                                                                              | GEN-001; PRD v2 ¬ß3.1 (Plantillas)                                                  | `T-32`                         | 1. Toggle aplica contexto y excluye RAG en ‚â§ 3 s (p95). 2. Dropdown muestra y aplica plantilla seleccionada. 3. El toggle "Web search" est√° deshabilitado y al pasar el cursor muestra el tooltip: "Disponible en futura versi√≥n". 4. Selecci√≥n de plantilla se refleja en la generaci√≥n.   | Postman collection; unit tests; Cypress UI tests.                                                   |
| **T-19** | Comment Tags & /comment CRUD                        | Monaco decorations (TODO, NOTE); REST `/comment` CRUD (list, add, delete); links Outline ‚Üî Tag; cobertura UI/BE                                                                                                                                                                                                                                                                                                                                                                                                                                                            | COM-001, UX-FLOW ¬ß 2.3                                                             | `T-07`                         | Crear / eliminar tag refleja en UI en < 150 ms; tests Jest > 90 %                                                                                                                                                                                                                           | Jest + Cypress, OpenAPI update.                                                                     |
| **T-20** | Bench E2E Performance                               | Scripts JMeter 100 docs + Locust 10 usuarios; mide generaci√≥n/edici√≥n/export. **Nota de Proceso**: El Tech Lead es el responsable final de certificar el cumplimiento de los KPIs de rendimiento basados en los informes generados.                                                                                                                                                                                                                                                                                                                                         | PERF-001; KPI-01; PRD ¬ß4.4.5                                                       | `T-08`, `T-10`                 | p95 ciclo completo (generar+editar+export) ‚â§ 6 min; p95 borrador inicial (draft_complete) ‚â§ 8 min; pruebas auto-ejecutadas en CI                                                                                                                                                            | JMeter & Locust reports, CI job, Acta de Certificaci√≥n de KPI.                                      |
| **T-21** | Navigation & Accessibility                          | Sidebar: pesta√±as Recent/Projects/Search; reordenamiento drag-drop de proyectos; Quick Open ‚åò+P; virtual-scroll > 10 p√°g.; tema claro/oscuro autom√°tico; teclado 100 %                                                                                                                                                                                                                                                                                                                                                                                                      | UX-FLOW ¬ß 2.3; A11y                                                                | `T-07`                         | ‚Ä¢ Lighthouse A11y ‚â• 90. ‚Ä¢ ‚åò+P abre selector < 150 ms (p95). ‚Ä¢ Virtual-scroll 10 000 l√≠neas sin jank (fps > 50). ‚Ä¢ Reordenar proyectos con drag-drop persiste orden.                                                                                                                         | Lighthouse report, Pa11y log, Cypress UX.                                                           |
| **T-22** | Delete & Restore (Logical)                          | Endpoints `/docs/{id}` DELETE (l√≥gico) y `/docs/{id}/restore`; UI con botones; retenci√≥n l√≥gica configurable (def: 30d) a trav√©s del servicio de configuraci√≥n. **Nota**: Esta tarea es el primer paso del ciclo de vida de borrado. Su validaci√≥n E2E debe realizarse conjuntamente con `T-35` y `T-36` en R6.                                                                                                                                                                                                                                                             | DEL-001, PRI-001                                                                   | `T-37`                         | 1. DELETE marca el doc como "deleted". 2. RESTORE lo recupera dentro del per√≠odo de retenci√≥n. 3. Tras el per√≠odo, es candidato para purga por T-36.                                                                                                                                        | Colecci√≥n Postman, tests Cypress.                                                                   |
| **T-23** | Health-check API                                    | Endpoint `/healthz` verifica DB, vector-store, OpenAI; responde JSON `{status:"ok"/"degraded"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | MON-001                                                                            | `T-01`                         | 1. HTTP 200 p95 < 200 ms. 2. Retorna "degraded" si falla dependencia.                                                                                                                                                                                                                       | Postman collection, CI integration test.                                                            |
| **T-24** | Consentimiento Expl√≠cito                            | Checkbox ‚ÄúAcepto uso IA externa‚Äù en UI de subida; registro en log inmutable; rechazo bloquea RAG/Web search.                                                                                                                                                                                                                                                                                                                                                                                                                                                                | PRI-002                                                                            | `T-04`                         | Sin checkbox deshabilita ‚ÄúUpload‚Äù y ‚ÄúGenerate context‚Äù.                                                                                                                                                                                                                                     | Pruebas Cypress, revisi√≥n UI.                                                                       |
| **T-25** | Dashboard Costes & Costo por Documento              | ‚Ä¢ Extender panel Grafana/UI para mostrar: ‚Äì Œ£ tokens/doc ‚Äì coste USD/d√≠a/modelo ‚Äì coste USD/doc.‚Ä¢ Alertas para desviaci√≥n > 5 % (Usage API).                                                                                                                                                                                                                                                                                                                                                                                                                                | MET-002, OBS-002; PRD v2 KPI-04                                                    | `T-14`                         | 1. M√©trica coste USD/doc calculada y comparada (< 5 % desviaci√≥n vs Usage API). 2. Dashboard muestra Œ£ tokens/doc, coste USD/d√≠a/modelo y USD/doc. 3. Alertas configuradas para coste/doc y desviaci√≥n > 5 %.                                                                               | Dashboard screenshots; CI logs; alert rules export.                                                 |
| **T-26** | Storage Quota                                       | Monitor total storage; HTTP 507 si > 50 GB; UI alerta en panel de settings.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | STO-001                                                                            | `T-01`                         | Upload que supera 50 GB retorna 507; alerta visible en Settings.                                                                                                                                                                                                                            | Postman tests, Cypress UI tests.                                                                    |
| **T-27** | Uptime Monitoring                                   | Integrar SRE monitor (Prometheus alert + Grafana) para uptime ‚â• 99 %, MTTR ‚â§ 2 h.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | AVL-001                                                                            | `T-14`                         | Informe uptime mensual ‚â• 99 %; incidencia MTTR reportada en ‚â§ 2 h.                                                                                                                                                                                                                          | Grafana report, incident log.                                                                       |
| **T-28** | Token Budget Guard                                  | Frontend y backend validan tama√±o total de tokens en prompt+context (max 9 000 tok); UI muestra advertencia visual al 90 % de l√≠mite.                                                                                                                                                                                                                                                                                                                                                                                                                                       | PERF-006                                                                           | `T-07`                         | 1. Al 90 % de token-budget (8,100 tokens), despliega advertencia. 2. Intento de exceder 9,000 tokens env√≠a HTTP 413 con mensaje claro.                                                                                                                                                      | Cypress UI tests; Postman collection.                                                               |
| **T-29** | Restore-Verifier                                    | CI/CD job semanal que ejecuta script `restore --verify` contra backup m√°s reciente y valida checksum                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | STO-002                                                                            | `T-15`                         | 1. Ejecuci√≥n programada semanal. 2. Hash comparado con origen; divergencia dispara alerta/email.                                                                                                                                                                                            | CI job config; report de verificaci√≥n                                                               |
| **T-30** | Rewrite-Latency Test                                | Script JMeter/Locust para endpoint `/rewrite` con payload de 100 tokens; mide latencia p95. **Nota de Proceso:** El Tech Lead es el responsable final de certificar el cumplimiento de los KPIs de rendimiento basados en los informes generados.                                                                                                                                                                                                                                                                                                                           | PERF-005                                                                           | `T-08`                         | 1. p95 `/rewrite` ‚â§ 2 s bajo carga de 50 usuarios concurrentes.                                                                                                                                                                                                                             | JMeter/Locust report; CI integration test, Acta de Certificaci√≥n de KPI.                            |
| **T-31** | Pause/Abort Flow                                    | API POST `/pause` y `/resume`; UI bot√≥n ‚ÄúPause‚Äù en Prompt Bar; modal de confirmaci√≥n con opciones ‚ÄúContinuar‚Äù y ‚ÄúCancelar‚Äù                                                                                                                                                                                                                                                                                                                                                                                                                                                  | UX-FLOW ¬ß 2.1                                                                      | `T-07`                         | ‚Ä¢ POST `/pause` p95 ‚â§ 150 ms. ‚Ä¢ Modal aparece ‚â§ 200 ms con botones Continuar/Cancelar. ‚Ä¢ ‚ÄúContinuar‚Äù reanuda flujo y ‚ÄúCancelar‚Äù detiene generaci√≥n.                                                                                                                                         | Cypress UX tests, API logs.                                                                         |
| **T-32** | Template Management                                 | ‚Ä¢ UI CRUD (crear/listar/editar/eliminar) de plantillas en Settings.‚Ä¢ API REST `/templates` CRUD (JSON).‚Ä¢ Persistencia en DB con migraciones.‚Ä¢ Integraci√≥n con dropdown de `T-18`.‚Ä¢ Unit & integration tests; Cypress UI tests.                                                                                                                                                                                                                                                                                                                                              | PRD v2 ¬ß3.1 (Prompts y Plantillas)                                                 | `T-44`                         | 1. CRUD opera con √©xito (status 200, DB reflejado). 2. Dropdown de `T-18` lista plantillas creadas. 3. API valida inputs y retorna errores claros en 4xx. 4. Generaci√≥n acepta templateId y aplica contenido.                                                                               | Postman collection; Cypress UI tests; migration scripts; API docs.                                  |
| **T-33** | Draft-Quality Test                                  | Harness ROUGE-L que eval√∫a sem√°ntica y cobertura del borrador inicial contra dataset de referencia; Payloads est√°ndar de 10 docs; Integraci√≥n CI/CD; Reporte de ROUGE y latencia.                                                                                                                                                                                                                                                                                                                                                                                           | PRD ¬ß4.4.1 (Productividad 80%), PRD ¬ß4.4.5 (L√≠mite 8 min), KPI-01                  | `T-06`                         | 1. ROUGE-L ‚â• 0.8 en borrador inicial (p95). 2. Latencia draft ‚â§ 8 min (p95), seg√∫n objetivo de UX. 3. CI falla si ROUGE < 0.8 o latencia > 8 min.                                                                                                                                           | CI job logs; test report con m√©tricas ROUGE; benchmarks de latencia.                                |
| **T-34** | Usability Testing                                   | ‚Ä¢ Plan de pruebas piloto con 5 usuarios.‚Ä¢ Guion de tareas clave (upload, edici√≥n, export).‚Ä¢ Encuesta SUS post-prueba.‚Ä¢ An√°lisis de feedback y recomendaciones.                                                                                                                                                                                                                                                                                                                                                                                                              | PRD v2 ¬ß4.4.10 (Usabilidad & SUS)                                                  | `T-10`, `T-21`                 | 1. SUS promedio ‚â• 80. 2. Todos los usuarios completan guion sin bloqueos cr√≠ticos. 3. Hallazgos documentados con propuestas de mejora.                                                                                                                                                      | Informe de usabilidad; datos y an√°lisis SUS; grabaciones de sesiones piloto.                        |
| **T-35** | GDPR Erasure on Demand                              | UI: bot√≥n ‚ÄúBorrar definitivamente‚Äù en perfil; endpoint DELETE `/docs/{id}/erase`; workflow de confirmaci√≥n; registro en log WORM. **Nota**: Esta tarea es el segundo paso del ciclo de vida de borrado. Su validaci√≥n E2E debe realizarse conjuntamente con `T-22` y `T-36` en R6.                                                                                                                                                                                                                                                                                          | DEL-002                                                                            | `T-13`, `T-22`                 | 1. DELETE `/docs/{id}/erase` devuelve HTTP 204 tras confirmaci√≥n. 2. Entrada en Audit Log WORM con usuario, doc-ID y timestamp ‚â§ 5 s. 3. Documento marcado para purga por el job `T-36`.                                                                                                    | Postman collection, Audit Log WORM, Cypress UI tests.                                               |
| **T-36** | GDPR Erase Purge Job                                | Cron job diario purge_erase_requests --older-than=30d; elimina de BD, vector-store y backups. **Nota de Riesgo Cr√≠tico:** Esta tarea incluye la purga de datos de backups encriptados, una operaci√≥n de **impacto catastr√≥fico** si falla. **Nota de Gesti√≥n de Riesgo:** La implementaci√≥n y revisi√≥n de esta tarea debe ser asignada a personal senior. El plan de pruebas para la purga de backups debe ser aprobado expl√≠citamente por el Tech Lead. **Incluye la validaci√≥n E2E del ciclo de vida de borrado completo (T-22 ‚Üí T-35 ‚Üí T-36)**.                          | PRI-001                                                                            | `T-35`, `T-15`                 | 1. Job diario programado sin errores. 2. Datos de solicitudes > 30d purgados irrevocablemente. 3. Test E2E valida ciclo completo: crear ‚Üí borrar l√≥gico (T-22) ‚Üí restaurar ‚Üí borrar a demanda (T-35) ‚Üí purgar.                                                                              | Logs de CI, reporte de purga, reporte de test E2E, Acta de Certificaci√≥n de Ciclo de Borrado.       |
| **T-37** | Admin Panel: Add User & System Mgmt Features        | A√±adir funcionalidad de gesti√≥n al panel de admin existente: 1. CRUD de usuarios. 2. Ver estado y re-indexar vectores. 3. Configurar ventana de restauraci√≥n. 4. Seleccionar modelo de IA por defecto (GPT-4o/GPT-4o-mini). **Nota de Trazabilidad**: Implementa la UI de administraci√≥n para ADM-001 (cuya l√≥gica de backend est√° en T-03).                                                                                                                                                                                                                                | ADM-001 (UI de administraci√≥n), PRD ¬ß2 (Rol Admin), PRD ¬ß10 (R-01)                 | `T-02`, `T-44`, `T-04`, `T-22` | 1. CRUD de usuarios se refleja inmediatamente. 2. Panel muestra estado y permite re-indexar. 3. Sistema respeta ventana de restauraci√≥n y modelo de IA configurados.                                                                                                                        | Docs OpenAPI, tests Cypress, Screenshots de la UI.                                                  |
| **T-38** | Implementar Sharding de Vector-Store en Producci√≥n  | Convertir PoC de `T-16` en una soluci√≥n de sharding productiva y monitorizada; incluye failover y rebalanceo autom√°tico.                                                                                                                                                                                                                                                                                                                                                                                                                                                    | SCA-001                                                                            | `T-16`                         | 1. Load test demuestra escalado horizontal del vector-store sin intervenci√≥n manual. 2. Failover de un nodo de vector-store se completa con MTTR ‚â§ 15 min sin p√©rdida de datos. 3. Panel de observabilidad muestra estado de los shards.                                                    | Chaos test report (vector-store), Grafana dashboard                                                 |
| **T-39** | Implementar Pin/Favoritos en Sidebar                | A√±adir icono 'pin' a documentos en la sidebar; secci√≥n 'Favoritos' en la parte superior; persistencia por usuario.                                                                                                                                                                                                                                                                                                                                                                                                                                                          | UX-001                                                                             | `T-21`                         | 1. Click en 'pin' mueve el documento a la secci√≥n 'Favoritos' y el estado persiste entre sesiones. 2. La secci√≥n 'Favoritos' es la primera en la lista de navegaci√≥n.                                                                                                                       | Cypress UI tests, screenshots                                                                       |
| **T-40** | Implementaci√≥n de Mejoras de Usabilidad Post-Piloto | Abordar los 2-3 hallazgos de mayor impacto del informe de usabilidad de `T-34`. Entrega de PRs espec√≠ficos para cada mejora.                                                                                                                                                                                                                                                                                                                                                                                                                                                | PRD ¬ß4.4.10 (Usabilidad), UX-FLOW ¬ß1                                               | `T-34`                         | 1. Los PRs de las mejoras priorizadas son aprobados y fusionados. 2. Una prueba de regresi√≥n (Cypress o manual) confirma que las mejoras funcionan como se espera y no introducen errores. 3. El informe de usabilidad de `T-34` es actualizado para marcar los hallazgos como "resueltos". | Links a Pull Requests, reporte de test de regresi√≥n, versi√≥n actualizada del informe de usabilidad. |
| **T-41** | User API Key Management                             | UI en perfil de usuario para gestionar API Key; endpoint POST `/user/credentials` que valida y guarda la clave cifrada usando el CredentialStore de `T-12`.                                                                                                                                                                                                                                                                                                                                                                                                                 | SEC-002 (Gap); PRD ¬ß6 (Supuesto)                                                   | `T-02`, `T-12`                 | 1. Endpoint rechaza claves inv√°lidas (400). 2. Clave v√°lida se guarda cifrada y no se expone en respuestas API. 3. Llamadas a OpenAI sin clave configurada devuelven error 402.                                                                                                             | Colecci√≥n Postman, tests Cypress, script de verificaci√≥n en DB.                                     |
| **T-42** | Risk Matrix Review (Proceso)                        | Revisi√≥n de la matriz de riesgos al final de cada hito (R0-R6). El entregable de cada ejecuci√≥n es un artefacto versionado y auditable.                                                                                                                                                                                                                                                                                                                                                                                                                                     | ‚Äî                                                                                  | ‚Äî                              | 1. La revisi√≥n se completa dentro de la semana de cierre del hito. 2. El artefacto de salida sigue la nomenclatura est√°ndar.                                                                                                                                                                | Minuta de reuni√≥n y commit con la actualizaci√≥n de la matriz de riesgos en PRD v2.md.               |
| **T-43** | Implementar Escaneo de Dependencias                 | Integrar escaneo de vulnerabilidades (SCA) y licencias en el pipeline de CI. Establecer pol√≠ticas de fallo para vulnerabilidades cr√≠ticas.                                                                                                                                                                                                                                                                                                                                                                                                                                  | `SEC-005 (Gap)`                                                                    | `T-01`                         | 1. Pipeline de CI integra pip-audit y yarn audit. 2. El job qa-gate falla si se detecta una vulnerabilidad de severidad CRITICAL o HIGH. 3. Reporte de licencias es generado como artefacto de CI.                                                                                           | Config. del pipeline, logs de CI, reporte de licencias.                                             |
| **T-44** | Admin Panel Skeleton & Config Store                 | Crear el layout base del panel de administraci√≥n (secci√≥n "Settings") y un servicio de configuraci√≥n backend para persistir pares clave-valor.                                                                                                                                                                                                                                                                                                                                                                                                                              | `ADM-001 (parcial)`                                                                | `T-02`                         | 1. Ruta /settings es accesible para roles de admin. 2. API GET/POST /config permite leer y escribir configuraciones. 3. La UI del panel es un esqueleto listo para ser poblado por otras tareas.                                                                                            | Colecci√≥n Postman, tests Cypress, screenshots de la UI.                                             |
| **T-45** | Guardrails Integration                              | Esquemas JSON/XML y validaci√≥n de salidas LLM; CI falla ante JSON inv√°lido.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | COH-001                                                                            | `T-11`                         | Guardrails rechaza outputs no v√°lidos; cobertura tests ‚â• 90 %.                                                                                                                                                                                                                              | Config Guardrails, PyTest suite                                                                     |
| **T-46** | DeepEval Benchmarks                                 | Suite DeepEval/RAGAS en CI para coherencia sem√°ntica y factualidad.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | COH-001                                                                            | `T-11`                         | KPI-16 ‚â§ 1 % se mantiene; regresiones rompen build.                                                                                                                                                                                                                                         | HTML report, CI job                                                                                 |
| **T-47** | Gate R4 Orchestrator Decision                       | Revisi√≥n de KPIs al finalizar R4 para emitir ADR-007 go/no-go sobre la adopci√≥n de orquestadores en releases futuras. **Nota:** Esta tarea formaliza la decisi√≥n mencionada en el PRD ¬ß11, actuando como el punto de control final de la Release 4.                                                                                                                                                                                                                                                                                                                         | ‚Äî                                                                                  | `T-42`                         | Acta de reuni√≥n + ADR-007 publicadas.                                                                                                                                                                                                                                                       | Minutes, ADR                                                                                        |

## 8. Glosario de T√©rminos y Acr√≥nimos

|           |                                                                                                                                                                                                      |
| --------- | ------------------------------------------------------------------------------------------------------------------------------------ |
| T√©rmino   | Descripci√≥n                                                                                                                                                                                          |
| **A11y**  | Abreviatura de "Accessibility" (Accesibilidad), se refiere al dise√±o de productos para personas con discapacidades.                                                                                  |
| **ADR**   | Architecture Decision Record. Documento que captura una decisi√≥n arquitect√≥nica importante junto con su contexto y consecuencias.                                                                    |
| **API**   | Application Programming Interface. Interfaz de programaci√≥n de aplicaciones.                                                                                                                         |
| **CI/CD** | Continuous Integration / Continuous Delivery. Pr√°ctica de automatizar la integraci√≥n y entrega de software.                                                                                          |
| **GDPR**  | General Data Protection Regulation. Reglamento General de Protecci√≥n de Datos de la UE.                                                                                                              |
| **GTI**   | Identificador Global de Tarea. C√≥digo √∫nico e inmutable (T-XX) que define una tarea en el proyecto.                                                                                                  |
| **HPA**   | Horizontal Pod Autoscaler. Componente de Kubernetes que escala autom√°ticamente el n√∫mero de pods.                                                                                                    |
| **JWT**   | JSON Web Token. Est√°ndar abierto para crear tokens de acceso basados en JSON.                                                                                                                        |
| **KPI**   | Key Performance Indicator. Indicador clave de rendimiento.                                                                                                                                           |
| **M-gap** | **Methodology Gap.** Indica que una tarea aborda un requisito del PRD cuya metodolog√≠a de implementaci√≥n no estaba completamente especificada, y la tarea se encarga de definir y cerrar esa brecha. |
| **MTTR**  | Mean Time To Recovery. Tiempo medio para recuperarse de un fallo.                                                                                                                                    |
| **OAuth** | Est√°ndar abierto para la delegaci√≥n de acceso, usado com√∫nmente para la autenticaci√≥n de usuarios.                                                                                                   |
| **OTel**  | OpenTelemetry. Est√°ndar de observabilidad para instrumentar, generar, recolectar y exportar datos de telemetr√≠a.                                                                                     |
| **PRD**   | Product Requirements Document. Documento que define los requisitos de un producto.                                                                                                                   |
| **RAG**   | Retrieval-Augmented Generation. Modelo de IA que combina un modelo de lenguaje con una base de conocimiento externa para generar respuestas m√°s precisas.                                            |
| **SUS**   | System Usability Scale. Cuestionario est√°ndar para medir la usabilidad de un sistema.                                                                                                                |
| **WBS**   | Work Breakdown Structure. Desglose jer√°rquico del trabajo a realizar en un proyecto.                                                                                                                 |
| **WII**   | Identificador de Elemento de Trabajo. C√≥digo jer√°rquico (R.WP-TXX-ST) que ubica una subtarea en el plan.                                                                                             |
| **WORM**  | Write Once, Read Many. Propiedad de un dispositivo de almacenamiento que solo permite escribir datos una vez, impidiendo su modificaci√≥n.                                                            |

## üìã Plan Control & Governance

### üîÑ Plan Lifecycle Management
**Status**: Approved for Execution
**Version**: 5.0 (Corrected Nomenclature)
**Review Cycle**: Sprint retrospectives with milestone reviews
**Next Review**: End of R0 (Sprint 1)

### üë• Plan Approval Authority

La firma de este documento implica la aceptaci√≥n del alcance, la metodolog√≠a y la planificaci√≥n aqu√≠ descritos, y autoriza el inicio de la ejecuci√≥n de la Release 0.

| Stakeholder Role | Name | Approval Date | Status |
|-----------------|------|---------------|--------|
| **Product Owner** | [TBD] | [Pending] | ‚è≥ In Review |
| **Tech Lead** | [TBD] | [Pending] | ‚è≥ In Review |
| **Project Manager** | Tech Lead | 2025-06-24 | ‚úÖ Approved |
| **Architecture Committee** | [TBD] | [Pending] | ‚è≥ In Review |

### üìà Change Control Process
> **Living Plan Policy:** This work plan serves as the execution framework and must be updated when scope, dependencies, or complexity assessments change. All changes require stakeholder approval and team notification.

### üîó Cross-References
- **Product Requirements**: [PRD-v2.md](./PRD-v2.md) - Authoritative product specification
- **Architecture Decisions**: [/docs/architecture/adr/](../architecture/adr/) - Technical decision records
- **Task Status Tracking**: [/tools/progress-dashboard.sh](../../tools/progress-dashboard.sh) - Real-time progress monitoring
- **Historical Task Details**: [/docs/project-management/archive/task-breakdown-detailed-v1.md](./archive/task-breakdown-detailed-v1.md) - Archived detailed breakdown
